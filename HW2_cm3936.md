HW2
================
Carolyn Martinez
2024-09-29

``` r
library(readxl)
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(dplyr)
library(readr)
```

janitor::clean_names(nyvtransit,)) **Problem 1: NYC Transit Data**

``` r
nyvtransit = read_csv("subwaydata1.csv", 
                       na = c("NA", ".", ""),
                      col_types = cols(
                         `Route8` = col_character(),
                       `Route9` = col_character(),
                     `Route10` = col_character(),
                      `Route11` = col_character()))


nyvtransit = janitor::clean_names(nyvtransit)
```

``` r
select(nyvtransit, line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada)
```

    ## # A tibble: 1,868 × 19
    ##    line     station_name station_latitude station_longitude route1 route2 route3
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr>  <chr> 
    ##  1 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ##  2 4 Avenue 25th St                  40.7             -74.0 R      <NA>   <NA>  
    ##  3 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  4 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  5 4 Avenue 36th St                  40.7             -74.0 N      R      <NA>  
    ##  6 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  7 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  8 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ##  9 4 Avenue 45th St                  40.6             -74.0 R      <NA>   <NA>  
    ## 10 4 Avenue 53rd St                  40.6             -74.0 R      <NA>   <NA>  
    ## # ℹ 1,858 more rows
    ## # ℹ 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>,
    ## #   route8 <chr>, route9 <chr>, route10 <chr>, route11 <chr>, entry <chr>,
    ## #   vending <chr>, entrance_type <chr>, ada <lgl>

``` r
nyvtransit %>%
  mutate(
    entry = case_match(entry, "YES" ~ 1, "NO" ~ 0, .default=as.logical(NA))
  )
```

    ## # A tibble: 1,868 × 32
    ##    division line   station_name station_latitude station_longitude route1 route2
    ##    <chr>    <chr>  <chr>                   <dbl>             <dbl> <chr>  <chr> 
    ##  1 BMT      4 Ave… 25th St                  40.7             -74.0 R      <NA>  
    ##  2 BMT      4 Ave… 25th St                  40.7             -74.0 R      <NA>  
    ##  3 BMT      4 Ave… 36th St                  40.7             -74.0 N      R     
    ##  4 BMT      4 Ave… 36th St                  40.7             -74.0 N      R     
    ##  5 BMT      4 Ave… 36th St                  40.7             -74.0 N      R     
    ##  6 BMT      4 Ave… 45th St                  40.6             -74.0 R      <NA>  
    ##  7 BMT      4 Ave… 45th St                  40.6             -74.0 R      <NA>  
    ##  8 BMT      4 Ave… 45th St                  40.6             -74.0 R      <NA>  
    ##  9 BMT      4 Ave… 45th St                  40.6             -74.0 R      <NA>  
    ## 10 BMT      4 Ave… 53rd St                  40.6             -74.0 R      <NA>  
    ## # ℹ 1,858 more rows
    ## # ℹ 25 more variables: route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <chr>, route9 <chr>, route10 <chr>, route11 <chr>,
    ## #   entrance_type <chr>, entry <dbl>, exit_only <chr>, vending <chr>,
    ## #   staffing <chr>, staff_hours <chr>, ada <lgl>, ada_notes <chr>,
    ## #   free_crossover <lgl>, north_south_street <chr>, east_west_street <chr>,
    ## #   corner <chr>, entrance_latitude <dbl>, entrance_longitude <dbl>, …

The data set contains various variables about the subway stops in the
New York City subway stations and their locations. The variables include
the line, station name, latitude and longitude, the route it runs on,
whether it is compliant with the ADA, whether it travels north to south
or east to west. The data set after my cleaning steps includes the line,
name of the station, the latitude and longitude of the station, the
routes, entry, vending and the type of entrance. My data cleaning steps
include the cleaning up the names of the columns using the ‘janitor’
package, removing the rows with missing variables, selecting specific
variables to view, and changing the entry variable from a character to a
logical variable. The remaining rows and columns are the stations and
the variables: line, name of the station, the latitude and longitude of
the station, the routes, entry, vending and the type of entrance,
repectively.

**How many distinct stations are there?**

``` r
distinct(nyvtransit, .keep_all = FALSE)
```

There are 1868 distinct train stations in NYC.

**How many stations are ADA compliant?**

``` r
nyvtransit %>%
  mutate(
    ada = case_match(ada, TRUE ~ 1, FALSE ~ 0, .default=as.logical(NA))
  )

filter(nyvtransit, ada==1)
```

There are 468 stations that are ADA compliant.

**What proportion of station entrances/exits without vending allow
entrance?**

``` r
no_vending=filter(nyvtransit,vending=="NO")
  
filter(no_vending,entry=="YES")
```

The proportion of station entrances/exits without vending that allow
entrance is 0.38.

**How many distinct stations serve the A train? Of the stations that
serve the A train, how many are ADA compliant?**

``` r
nyvtransit_pivotlong = 
  pivot_longer(
    nyvtransit, 
    route1:route11,
    names_to = "routenumber", 
    values_to = "routename")
  
nyvtransit_pivotlong_distinct = distinct(nyvtransit_pivotlong, station_name, .keep_all = TRUE)

nyvtransit_pivotlong_distinctADA=
   filter(nyvtransit_pivotlong,  routename =="A", ada==1) %>%
   distinct(station_name, .keep_all = TRUE )
```

There are 16 distinct stations that serve the A train and that are ADA
compliant. There are 356 distinct stations that serve the A train.

**Problem 2**
